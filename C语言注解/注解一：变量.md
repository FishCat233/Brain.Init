> [!WARNING]
> 在部分代码中，我会省略例如 `int main()` `#include <stdio.h>` 这样的“框架”代码。

正如前文所说，我们用编程语言来描述解决问题的办法，这个过程就是所说的写代码或者说编程。

既然要解决问题，就需要存储数据，需要描述怎么算出答案。在C语言中，存储数据的东西就是变量，描述计算过程的就是语句。

变量就像人类计算时写在草稿纸上的草稿，语句则是人类计算的方法（存在大脑中）。

有一个很有名的一句话便是：

> **程序=算法+数据结构**

其中，算法就是由语句构成，数据结构就是由变量构成，可见变量和语句的重要性。

而要讲解变量和语句，也绕不开表达式和运算符。

当你能理解变量、语句、表达式、运算符这几个原子级别的概念时，你就已经可以把大部分 C 语言的语法看懂了，甚至能写出花来。

## 变量

*变量的数据存储在内存中，通过变量名进行访问。*

抛去底层的细节，我会以不准确的比方来为变量注解。

在下面，我会将内存比作具有奇怪书写规则的草稿本，变量名比作页码，变量值比作草稿本上的数字。

试想象，有一个能够无限次数擦写的草稿本，但是规定是每一页草稿纸只能写一个数，该如何使用这个草稿本来存储数据？

我们可以把数字写在草稿本上，然后把页号记下来，在需要查询数据的时候翻到对应页数上，就像查电话簿那样。

但是这样子的话，我们写出来的计算过程也许会是这样：

> 取出草稿本上第 1 页的数字
> 
> 取出草稿本上第 2 页的数字
> 
> 将前面两个数字相加的结果存储在第 3 页的数字上
> 
> 取出草稿本上第 3 页的数字
> 
> 取出草稿本上第 4 页的数字
>
> 将前面两个数字相加的结果存储在第 5 页的数字上
> 
> 取出草稿本上第 5 页的数字
>
> 将前面一个数字乘以 0.2 的结果存储在第 6 页的数字上
> 
> 输出第 6 页的数字

看着会莫名其妙，你知道它在进行一些数学计算，但是却看不懂实际的意思。因为页码只是一个数字，而没有名字。

所以我们需要给草稿本上的数字取一个名字，这样子我们只需要记名字就行了，关于根据名字找到数字的过程，计算机自己会帮我们完成。

将上面的例子改成用名字来当查数据的页码，我们就可以这样写：

> 取出草稿本上 商品成本 页的数字
> 
> 取出草稿本上 运输费用 页的数字
> 
> 将前面两个数字相加的结果存储在 基本成本 页的数字上
> 
> 取出草稿本上 基本成本 页的数字
> 
> 取出草稿本上 营销费用 页的数字
>
> 将前面两个数字相加的结果存储在 总成本 页的数字上
> 
> 取出草稿本上 总成本 页的数字
>
> 将前面一个数字乘以 0.2 的结果存储在 定价 页的数字上
> 
> 输出 定价 页的数字

这下看懂了。

这实际上是一个“根据商品成本计算商品最终定价”的算法。

将草稿本换回内存，页码换回变量名，数字换回变量值，我们可以知道 C 语言中的变量名是什么作用：给电脑的草稿本，也就是内存中的某一页起一个名字，方便我们查询和修改。

上面的例子在 C 语言中则是这样（虽然按照规范变量名应该使用英文，但是在这里使用中文便于理解）：

```c
#include <stdio.h>

int main() {
    double 商品成本 = 100.0;
    double 运输费用 = 10.0;
    double 基本成本 = 商品成本 + 运输费用;
    double 营销费用 = 20.0;
    double 总成本 = 基本成本 + 营销费用;
    double 定价 = 总成本 * 0.2;

    printf("商品定价为 %.2f\n", 定价);

    return 0;
}
```

*如果涉及到你不会的语法比如说`return`, `%.2f`之类的，你可以不去理会，只需要基本的变量定义和运算语法就足够了。*

上面的变量名在我们的程序被转换成0101的二进制语言时会被替换成内存草稿本上具体的数字，电脑程序运行时则会根据具体的数字去读写数值。

## 语句和语句块

语句没什么好说的，讲述了怎么进行运算。

就像自然语言里面，一句话会用句号结尾，在 C 语言的语句中，则是用分号结尾。

为什么要说这个呢？我想说的是实际上 C 语言的语法比你想得自由，你可以把很多条语句写在同一行，因为实际计算机读他们的时候都是按分号一句一句读的。

比如说写成这样：

```c
#include <stdio.h>
#include <string.h>
#include <unistd.h>
            int i,j,k,x,y,o,N;
         main(){float z[1760],a
      #define R(t,x,y) f=x;x-=t*y\
   ;y+=t*f;f=(3-x*x-y*y)/2;x*=f;y*=f;
   =0,e=1,c=1,d=0,f,g,h,G,H,A,t,D;char
 b[1760];for(;;){memset(b,32,1760);g=0,
h=1;memset(z,0,7040);for(j=0;j<90;j++){
G=0,H=1;for(i=0;i<314;i++){A=h+2,D=1/(G*
A*a+g*e+5);t=G*A        *e-g*a;x=40+30*D
*(H*A*d-t*c);y=          12+15*D*(H*A*c+
t*d);o=x+80*y;N          =8*((g*a-G*h*e)
*d-G*h*a-g*e-H*h        *c);if(22>y&&y>
 0&&x>0&&80>x&&D>z[o]){z[o]=D;b[o]=(N>0
  ?N:0)[".,-~:;=!*#$@"];}R(.02,H,G);}R(
  .07,h,g);}for(k=0;1761>k;k++)putchar
   (k%80?b[k]:10);R(.04,e,a);R(.02,d,
     c);usleep(15000);printf('\n'+(
        " donut.c! \x1b[23A"));}}
           /*3D-spinning-donut*/
```

尽管看着很乱，但是依然可以运行。

你可以复制代码试着运行一下，效果是在终端上画一个会旋转的甜甜圈。

此外值得一提的是，单写一个分号也能是一条语句，例如`;`，这条特别的语句叫做空语句。

例如在上面的程序中，数分号就能数出来一共有 8 条语句。

而你可以将多条语句组成一个语句块，语法上是使用括号括起来。

```c
{
    int a = 0;
    int b = 1;
}
```

像这样就是一个包含了两条语句的语句块。

见过不少教程可能没提的一个观点，便是**在语法上，可以使用语句块的地方，也可以用语句，反之同样成立。**

我会重新给你从这个视角上看`if` `while` `for`这三个语句。

```c
if (a > b) {
    printf("a 大于 b\n");
}
```

实际上这里就是`if (表达式) 语句块`这样的语法，我们先不管表达式是什么，来看语句，发现这里的`printf("a 大于 b\n");`是被包裹在语句块里的语句，那么我们有没有可能把这个块直接替换成语句呢？

```c
if (a > b) printf("a 大于 b\n");
```

再来看看`while`和`for`：

```c
while (a > b) {
    printf("a 大于 b\n");
}

for (int i = 0; i < 10; i++) {
    printf("i 现在是 %d\n", i);
}
```

同样，我们可以把语句块替换成等价语句：

```c
while (a > b) printf("a 大于 b\n");
for (int i = 0; i < 10; i++) printf("i 现在是 %d\n", i);
```

因为在语法上，`while`只是会把表达式后面那个语句重复执行，如果你是语句块，则重复执行语句块，而语句块执行则是按顺序一条一条执行。

## 表达式

表达式是语句的核心